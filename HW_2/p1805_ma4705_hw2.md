p1805_ma4705_hw2
================
2025-10-04

# Problem 1

- clean pols-month data

``` r
pols_month_df <- read_csv("./datasets/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, c("year", "month", "day"), sep = "-") |>
  mutate(year = substr(year, 3, 4), month = month.name[as.numeric(month)],
         president = factor(prez_gop, levels = c(0, 1), labels = c("dem", "gop"))) |>
  select(-day, -prez_gop, -prez_dem) |>
  relocate(year, month, president)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month_df
```

    ## # A tibble: 822 × 9
    ##    year  month     president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <chr> <chr>     <fct>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1 47    January   dem            23      51     253      23      45     198
    ##  2 47    February  dem            23      51     253      23      45     198
    ##  3 47    March     dem            23      51     253      23      45     198
    ##  4 47    April     dem            23      51     253      23      45     198
    ##  5 47    May       dem            23      51     253      23      45     198
    ##  6 47    June      dem            23      51     253      23      45     198
    ##  7 47    July      dem            23      51     253      23      45     198
    ##  8 47    August    dem            23      51     253      23      45     198
    ##  9 47    September dem            23      51     253      23      45     198
    ## 10 47    October   dem            23      51     253      23      45     198
    ## # ℹ 812 more rows

- clean snp data

``` r
snp_df <- read_csv("./datasets/snp.csv") |>
  janitor::clean_names() |>
  separate(date, c("month", "day", "year"), sep = "/") |>
  mutate(month = month.name[as.numeric(month)]) |>
  select(-day) |>
  relocate(year, month)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp_df
```

    ## # A tibble: 787 × 3
    ##    year  month    close
    ##    <chr> <chr>    <dbl>
    ##  1 15    July     2080.
    ##  2 15    June     2063.
    ##  3 15    May      2107.
    ##  4 15    April    2086.
    ##  5 15    March    2068.
    ##  6 15    February 2104.
    ##  7 15    January  1995.
    ##  8 14    December 2059.
    ##  9 14    November 2068.
    ## 10 14    October  2018.
    ## # ℹ 777 more rows

- clean unemployment data

``` r
unemployment_df <- read_csv("./datasets/unemployment.csv") |>
  pivot_longer(Jan:Dec, names_to = "month", values_to = "unempl_perc") |>
  mutate(month = as.character(factor(month, levels = month.abb, labels = month.name))) |>
  janitor::clean_names() |>
  mutate(year = substr(as.character(year), 3, 4))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_df
```

    ## # A tibble: 816 × 3
    ##    year  month     unempl_perc
    ##    <chr> <chr>           <dbl>
    ##  1 48    January           3.4
    ##  2 48    February          3.8
    ##  3 48    March             4  
    ##  4 48    April             3.9
    ##  5 48    May               3.5
    ##  6 48    June              3.6
    ##  7 48    July              3.6
    ##  8 48    August            3.9
    ##  9 48    September         3.8
    ## 10 48    October           3.7
    ## # ℹ 806 more rows

- merge pols-month and snp data

``` r
pols_snp_df = left_join(pols_month_df, snp_df)
```

    ## Joining with `by = join_by(year, month)`

``` r
pols_snp_df
```

    ## # A tibble: 822 × 10
    ##    year  month   president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem close
    ##    <chr> <chr>   <fct>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <dbl>
    ##  1 47    January dem            23      51     253      23      45     198    NA
    ##  2 47    Februa… dem            23      51     253      23      45     198    NA
    ##  3 47    March   dem            23      51     253      23      45     198    NA
    ##  4 47    April   dem            23      51     253      23      45     198    NA
    ##  5 47    May     dem            23      51     253      23      45     198    NA
    ##  6 47    June    dem            23      51     253      23      45     198    NA
    ##  7 47    July    dem            23      51     253      23      45     198    NA
    ##  8 47    August  dem            23      51     253      23      45     198    NA
    ##  9 47    Septem… dem            23      51     253      23      45     198    NA
    ## 10 47    October dem            23      51     253      23      45     198    NA
    ## # ℹ 812 more rows

- merge with unemployment data

``` r
pols_snp_unemp_df = left_join(pols_snp_df, unemployment_df) |> select(year, month, president, close, unempl_perc)
```

    ## Joining with `by = join_by(year, month)`

``` r
pols_snp_unemp_df
```

    ## # A tibble: 822 × 5
    ##    year  month     president close unempl_perc
    ##    <chr> <chr>     <fct>     <dbl>       <dbl>
    ##  1 47    January   dem          NA          NA
    ##  2 47    February  dem          NA          NA
    ##  3 47    March     dem          NA          NA
    ##  4 47    April     dem          NA          NA
    ##  5 47    May       dem          NA          NA
    ##  6 47    June      dem          NA          NA
    ##  7 47    July      dem          NA          NA
    ##  8 47    August    dem          NA          NA
    ##  9 47    September dem          NA          NA
    ## 10 47    October   dem          NA          NA
    ## # ℹ 812 more rows

# Problem 2

``` r
mrtrashweel_df = read_excel("./datasets/202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel") |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(year = as.numeric(year), sports_balls = round(sports_balls), trash_wheel = "MTW", trash_wheel = factor(trash_wheel, levels = c("MTW", "GF", "P"), labels= c("Mr. Trash Wheel", "Gwynns Falls", "Professor")))
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
mrtrashweel_df
```

    ## # A tibble: 707 × 17
    ##    dumpster month  year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 May    2014 2014-05-16 00:00:00        4.31                 18
    ##  2        2 May    2014 2014-05-16 00:00:00        2.74                 13
    ##  3        3 May    2014 2014-05-16 00:00:00        3.45                 15
    ##  4        4 May    2014 2014-05-17 00:00:00        3.1                  15
    ##  5        5 May    2014 2014-05-17 00:00:00        4.06                 18
    ##  6        6 May    2014 2014-05-20 00:00:00        2.71                 13
    ##  7        7 May    2014 2014-05-21 00:00:00        1.91                  8
    ##  8        8 May    2014 2014-05-28 00:00:00        3.7                  16
    ##  9        9 June   2014 2014-06-05 00:00:00        2.52                 14
    ## 10       10 June   2014 2014-06-11 00:00:00        3.76                 18
    ## # ℹ 697 more rows
    ## # ℹ 11 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>, x15 <lgl>,
    ## #   x16 <lgl>, trash_wheel <fct>

``` r
gftrashwheel_df = read_excel("./datasets/202509 Trash Wheel Collection Data.xlsx", sheet = "Gwynns Falls Trash Wheel") |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(trash_wheel = "GF", trash_wheel = factor(trash_wheel, levels = c("MTW", "GF", "P"), labels= c("Mr. Trash Wheel", "Gwynns Falls", "Professor")))

gftrashwheel_df
```

    ## # A tibble: 349 × 13
    ##    dumpster month   year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>  <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 July    2021 2021-07-03 00:00:00        0.93                 15
    ##  2        2 July    2021 2021-07-07 00:00:00        2.26                 15
    ##  3        3 July    2021 2021-07-07 00:00:00        1.62                 15
    ##  4        4 July    2021 2021-07-16 00:00:00        1.76                 15
    ##  5        5 July    2021 2021-07-30 00:00:00        1.53                 15
    ##  6        6 August  2021 2021-08-11 00:00:00        2.06                 15
    ##  7        7 August  2021 2021-08-14 00:00:00        1.9                  15
    ##  8        8 August  2021 2021-08-16 00:00:00        2.16                 15
    ##  9        9 August  2021 2021-08-16 00:00:00        2.6                  15
    ## 10       10 August  2021 2021-08-17 00:00:00        3.21                 15
    ## # ℹ 339 more rows
    ## # ℹ 7 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>, trash_wheel <fct>

``` r
proftrashwheel_df = read_excel("./datasets/202509 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel") |>
  janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(trash_wheel = "P", trash_wheel = factor(trash_wheel, levels = c("MTW", "GF", "P"), labels= c("Mr. Trash Wheel", "Gwynns Falls", "Professor")))

proftrashwheel_df
```

    ## # A tibble: 132 × 14
    ##    dumpster month     year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>    <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 January   2017 2017-01-02 00:00:00        1.79                 15
    ##  2        2 January   2017 2017-01-30 00:00:00        1.58                 15
    ##  3        3 February  2017 2017-02-26 00:00:00        2.32                 18
    ##  4        4 February  2017 2017-02-26 00:00:00        3.72                 15
    ##  5        5 February  2017 2017-02-28 00:00:00        1.45                 15
    ##  6        6 March     2017 2017-03-30 00:00:00        1.71                 15
    ##  7        7 April     2017 2017-04-01 00:00:00        1.82                 15
    ##  8        8 April     2017 2017-04-20 00:00:00        2.37                 15
    ##  9        9 May       2017 2017-05-10 00:00:00        2.64                 15
    ## 10       10 May       2017 2017-05-26 00:00:00        2.78                 15
    ## # ℹ 122 more rows
    ## # ℹ 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, homes_powered <dbl>, trash_wheel <fct>

``` r
trashwheel_df = bind_rows(mrtrashweel_df, proftrashwheel_df, gftrashwheel_df)
trashwheel_df
```

    ## # A tibble: 1,188 × 17
    ##    dumpster month  year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 May    2014 2014-05-16 00:00:00        4.31                 18
    ##  2        2 May    2014 2014-05-16 00:00:00        2.74                 13
    ##  3        3 May    2014 2014-05-16 00:00:00        3.45                 15
    ##  4        4 May    2014 2014-05-17 00:00:00        3.1                  15
    ##  5        5 May    2014 2014-05-17 00:00:00        4.06                 18
    ##  6        6 May    2014 2014-05-20 00:00:00        2.71                 13
    ##  7        7 May    2014 2014-05-21 00:00:00        1.91                  8
    ##  8        8 May    2014 2014-05-28 00:00:00        3.7                  16
    ##  9        9 June   2014 2014-06-05 00:00:00        2.52                 14
    ## 10       10 June   2014 2014-06-11 00:00:00        3.76                 18
    ## # ℹ 1,178 more rows
    ## # ℹ 11 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <dbl>, homes_powered <dbl>, x15 <lgl>,
    ## #   x16 <lgl>, trash_wheel <fct>

# Problem 3
